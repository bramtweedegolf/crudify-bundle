{% extends definition.layout %}

{% block bs_crudify_content %}
  <h3>{{ "Overview"|trans }} <small>{{ definition.entityTitle|trans }}</small></h3>
  {% if definition.withCreate and is_granted('CRUDIFY_CREATE', definition) %}
  <a href="{{ crudify_action('new', definition) }}" class="btn btn-success pull-right">
    <i class="fa fa-plus"></i> {{ "Add"|trans }}
  </a>
{% endif %}
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      {% for column in definition.index %}
        <th class="{{ column.type }}">
          {{ knp_pagination_sortable(objects, column.title|trans, column.field) }}
        </th>
      {% endfor %}
      <th></th>
    </tr>
    </thead>
    <tbody>
    {% for object in objects %}
      <tr>
        {% for column in definition.index %}
          <td class="{{ column.type }}">{{ crudify_value(column, object) }}</td>
        {% endfor %}
        <td class="actions">
          {% if definition.withUpdate and is_granted('CRUDIFY_UPDATE', definition) %}
            <a href="{{ crudify_action('edit', definition, object) }}"
               class="btn btn-default btn-sm click-disable">
              <span class="fa fa-pencil"></span>
              {{ 'Edit'|trans }}
            </a>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  {{ knp_pagination_render(objects) }}
{% endblock %}
